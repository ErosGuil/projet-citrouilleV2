<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PROJET CITROUILLE - ACC√àS RESTREINT</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Courier New', monospace;
            background: #000;
            color: #0f0;
            min-height: 100vh;
            overflow-x: hidden;
            position: relative;
        }
        
        .particles {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 1;
        }
        
        .particle {
            position: absolute;
            font-size: 20px;
            opacity: 0.3;
            animation: float 15s infinite;
        }
        
        @keyframes float {
            0% {
                transform: translateY(100vh) rotate(0deg);
                opacity: 0;
            }
            10% {
                opacity: 0.3;
            }
            90% {
                opacity: 0.3;
            }
            100% {
                transform: translateY(-100px) rotate(360deg);
                opacity: 0;
            }
        }
        
        .blood-drip {
            position: fixed;
            top: 0;
            width: 2px;
            height: 0;
            background: linear-gradient(to bottom, transparent, #8B0000, #FF0000);
            animation: drip 3s ease-in infinite;
            pointer-events: none;
            z-index: 2;
        }
        
        @keyframes drip {
            0% { height: 0; top: 0; }
            50% { height: 100px; }
            100% { height: 100px; top: 100vh; opacity: 0; }
        }
        
        .login-screen {
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            background: linear-gradient(135deg, #1a0a00 0%, #0a0a0a 100%);
            position: relative;
            z-index: 10;
        }
        
        .pumpkin-bg {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 300px;
            opacity: 0.1;
            z-index: 0;
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0%, 100% { opacity: 0.1; transform: translate(-50%, -50%) scale(1); }
            50% { opacity: 0.2; transform: translate(-50%, -50%) scale(1.05); }
        }
        
        .login-box {
            background: rgba(0, 0, 0, 0.9);
            border: 3px solid #ff6600;
            padding: 40px;
            border-radius: 10px;
            box-shadow: 0 0 50px rgba(255, 102, 0, 0.5);
            z-index: 1;
            max-width: 500px;
            width: 90%;
        }
        
        .login-box h1 {
            color: #ff6600;
            text-align: center;
            margin-bottom: 10px;
            font-size: 28px;
            text-shadow: 0 0 20px #ff6600;
        }
        
        .login-box .subtitle {
            color: #f00;
            text-align: center;
            margin-bottom: 30px;
            font-size: 12px;
            letter-spacing: 2px;
        }
        
        .warning {
            background: rgba(255, 0, 0, 0.2);
            border-left: 4px solid #f00;
            padding: 15px;
            margin-bottom: 20px;
            color: #f00;
            font-size: 13px;
        }
        
        input[type="password"], input[type="text"] {
            width: 100%;
            padding: 15px;
            background: rgba(0, 0, 0, 0.8);
            border: 2px solid #ff6600;
            color: #ff6600;
            font-family: 'Courier New', monospace;
            font-size: 18px;
            text-align: center;
            letter-spacing: 5px;
            margin-bottom: 20px;
            border-radius: 5px;
        }
        
        input::placeholder {
            color: rgba(255, 102, 0, 0.4);
            letter-spacing: normal;
        }
        
        button {
            width: 100%;
            padding: 15px;
            background: #ff6600;
            color: #000;
            border: none;
            font-family: 'Courier New', monospace;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
            border-radius: 5px;
            transition: all 0.3s;
        }
        
        button:hover:not(:disabled) {
            background: #ff8800;
            box-shadow: 0 0 30px rgba(255, 102, 0, 0.8);
        }
        
        button:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }
        
        .error-msg, .success-msg {
            text-align: center;
            margin-top: 15px;
            font-weight: bold;
        }
        
        .error-msg {
            color: #f00;
        }
        
        .success-msg {
            color: #0f0;
        }
        
        .activation-screen {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100vh;
            background: #000;
            z-index: 1000;
            overflow: hidden;
        }
        
        .matrix-bg {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
        }
        
        .activation-content {
            position: relative;
            z-index: 10;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            height: 100vh;
            color: #0f0;
        }
        
        .pumpkin-flash {
            font-size: 200px;
            animation: flash 0.5s infinite;
            margin: 20px;
        }
        
        @keyframes flash {
            0%, 100% { opacity: 1; color: #ff6600; }
            50% { opacity: 0.3; color: #ff0000; }
        }
        
        .activation-text {
            font-size: 32px;
            margin: 20px;
            text-shadow: 0 0 10px #0f0;
            animation: blink 1s infinite;
        }
        
        @keyframes blink {
            0%, 50%, 100% { opacity: 1; }
            25%, 75% { opacity: 0; }
        }
        
        .progress-bar {
            width: 80%;
            height: 30px;
            border: 2px solid #0f0;
            margin: 20px;
            position: relative;
            overflow: hidden;
        }
        
        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #0f0, #ff6600);
            width: 0%;
            animation: progressAnim 3s forwards;
        }
        
        @keyframes progressAnim {
            to { width: 100%; }
        }
        
        .terminal-screen {
            display: none;
            padding: 20px;
            max-width: 1200px;
            margin: 0 auto;
            position: relative;
            z-index: 10;
        }
        
        .terminal-header {
            background: linear-gradient(135deg, #1a0a00, #0a0a0a);
            border: 2px solid #ff6600;
            padding: 20px;
            margin-bottom: 20px;
            border-radius: 5px;
            box-shadow: 0 0 30px rgba(255, 102, 0, 0.3);
        }
        
        .terminal-header h1 {
            color: #ff6600;
            text-shadow: 0 0 10px #ff6600;
            margin-bottom: 5px;
        }
        
        .terminal-header .status {
            color: #0f0;
            font-size: 14px;
        }
        
        .progress-tracker {
            display: flex;
            justify-content: space-around;
            margin: 20px 0;
            padding: 20px;
            background: rgba(0, 0, 0, 0.5);
            border: 2px solid #0f0;
            border-radius: 5px;
            flex-wrap: wrap;
        }
        
        .progress-step {
            text-align: center;
            padding: 10px;
            border-radius: 5px;
            transition: all 0.3s;
            min-width: 100px;
            margin: 5px;
        }
        
        .progress-step.locked {
            opacity: 0.3;
            color: #666;
        }
        
        .progress-step.active {
            background: rgba(255, 102, 0, 0.3);
            border: 2px solid #ff6600;
            color: #ff6600;
        }
        
        .progress-step.completed {
            background: rgba(0, 255, 0, 0.2);
            border: 2px solid #0f0;
            color: #0f0;
        }
        
        .terminal-content {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
        }
        
        .terminal-module {
            background: rgba(0, 0, 0, 0.9);
            border: 2px solid #0f0;
            border-radius: 5px;
            padding: 20px;
            box-shadow: 0 0 20px rgba(0, 255, 0, 0.2);
            transition: all 0.3s;
            position: relative;
        }
        
        .terminal-module.locked {
            opacity: 0.4;
            pointer-events: none;
        }
        
        .terminal-module.locked::after {
            content: 'üîí';
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 60px;
            opacity: 0.5;
        }
        
        .terminal-module:hover:not(.locked) {
            border-color: #ff6600;
            box-shadow: 0 0 30px rgba(255, 102, 0, 0.4);
        }
        
        .module-header {
            display: flex;
            align-items: center;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 1px solid #0f0;
        }
        
        .module-icon {
            font-size: 24px;
            margin-right: 10px;
        }
        
        .module-title {
            color: #ff6600;
            font-size: 18px;
            font-weight: bold;
        }
        
        .module-content {
            color: #0f0;
        }
        
        .file-list {
            list-style: none;
        }
        
        .file-item {
            padding: 10px;
            margin: 5px 0;
            background: rgba(0, 255, 0, 0.1);
            border-left: 3px solid #0f0;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .file-item:hover {
            background: rgba(255, 102, 0, 0.2);
            border-left-color: #ff6600;
            padding-left: 15px;
        }
        
        .audio-player {
            width: 100%;
            margin: 10px 0;
        }
        
        .lock-container {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin: 20px 0;
            flex-wrap: wrap;
        }
        
        .lock-wheel {
            display: flex;
            flex-direction: column;
            align-items: center;
            background: rgba(0, 0, 0, 0.8);
            border: 3px solid #ff6600;
            border-radius: 10px;
            padding: 15px;
            box-shadow: 0 0 20px rgba(255, 102, 0, 0.3);
        }
        
        .wheel-numbers {
            width: 60px;
            height: 80px;
            overflow: hidden;
            position: relative;
            background: rgba(0, 0, 0, 0.9);
            border: 2px solid #0f0;
            border-radius: 5px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
        }
        
        .number {
            font-size: 36px;
            font-weight: bold;
            color: #0f0;
            text-align: center;
            line-height: 80px;
            width: 100%;
            opacity: 0.3;
            transition: all 0.3s;
        }
        
        .number.active {
            opacity: 1;
            color: #ff6600;
            text-shadow: 0 0 10px #ff6600;
            font-size: 42px;
        }
        
        .wheel-buttons {
            display: flex;
            flex-direction: column;
            gap: 5px;
            margin-top: 10px;
        }
        
        .wheel-btn {
            width: 60px;
            padding: 8px;
            background: #0f0;
            color: #000;
            border: none;
            font-size: 18px;
            font-weight: bold;
            cursor: pointer;
            border-radius: 5px;
            transition: all 0.3s;
        }
        
        .wheel-btn:hover {
            background: #ff6600;
            box-shadow: 0 0 15px rgba(255, 102, 0, 0.8);
        }
        
        .wheel-btn:active {
            transform: scale(0.95);
        }
        
        .simon-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
            margin: 20px 0;
        }
        
        .simon-button {
            aspect-ratio: 1;
            background: rgba(0, 255, 0, 0.2);
            border: 3px solid #0f0;
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.2s;
        }
        
        .simon-button:hover {
            background: rgba(255, 102, 0, 0.3);
            border-color: #ff6600;
            transform: scale(1.05);
        }
        
        .simon-icon {
            font-size: 60px;
        }
        
        .simon-button.active {
            background: rgba(255, 255, 0, 0.5);
            border-color: #ff0;
            transform: scale(1.1);
            box-shadow: 0 0 30px rgba(255, 255, 0, 0.8);
        }
        
        .simon-button.correct {
            background: rgba(0, 255, 0, 0.5);
            border-color: #0f0;
            animation: successPulse 0.5s;
        }
        
        .simon-button.wrong {
            background: rgba(255, 0, 0, 0.5);
            border-color: #f00;
            animation: shake 0.5s;
        }
        
        .puzzle-container {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 5px;
            margin: 20px auto;
            max-width: 300px;
        }
        
       .puzzle-piece {
            aspect-ratio: 1;
            border: 2px solid #ff6600;
            border-radius: 5px;
            cursor: pointer;
            transition: all 0.3s;
            position: relative;
            overflow: hidden;
            background: rgba(0, 0, 0, 0.8);
        }

        .puzzle-piece canvas {
            width: 100%;
            height: 100%;
            display: block;
        }

        .puzzle-piece.empty {
            background: rgba(0, 0, 0, 0.8);
            border: 2px dashed #666;
            cursor: default;
        }

        .puzzle-piece:hover:not(.empty) {
            transform: scale(1.05);
            box-shadow: 0 0 20px rgba(255, 102, 0, 0.8);
            border-color: #0f0;
        }

        .puzzle-piece-number {
            position: absolute;
            top: 2px;
            left: 2px;
            background: rgba(0, 0, 0, 0.9);
            color: #ff6600;
            padding: 3px 6px;
            border-radius: 3px;
            font-size: 12px;
            font-weight: bold;
            display: none;
            border: 1px solid #ff6600;
            z-index: 10;
        }

        .puzzle-container.show-numbers .puzzle-piece-number {
            display: block;
        }

        /* Am√©lioration du bouton d'aide */
        button.help-btn {
            background: rgba(0, 255, 0, 0.2);
            color: #0f0;
            border: 2px solid #0f0;
        }

        button.help-btn:hover {
            background: rgba(0, 255, 0, 0.4);
        }
        
        .puzzle-piece:hover {
            background: rgba(255, 102, 0, 0.5);
            transform: scale(1.05);
        }
        
        .puzzle-piece.selected {
            background: rgba(0, 255, 0, 0.3);
            border-color: #0f0;
            box-shadow: 0 0 20px rgba(0, 255, 0, 0.8);
        }
        
        #mazeCanvas {
            image-rendering: pixelated;
        }
        
        .enigma-box {
            background: rgba(255, 102, 0, 0.1);
            border: 2px solid #ff6600;
            padding: 20px;
            margin: 20px 0;
            border-radius: 5px;
        }
        
        .enigma-box h3 {
            color: #ff6600;
            margin-bottom: 15px;
        }
        
        .enigma-box p {
            color: #0f0;
            line-height: 1.6;
            margin: 10px 0;
        }
        
        .quiz-option {
            background: rgba(0, 255, 0, 0.1);
            border: 2px solid #0f0;
            padding: 15px;
            margin: 10px 0;
            cursor: pointer;
            transition: all 0.3s;
            border-radius: 5px;
        }
        
        .quiz-option:hover {
            background: rgba(255, 102, 0, 0.2);
            border-color: #ff6600;
            transform: translateX(5px);
        }
        
        .quiz-option.correct {
            background: rgba(0, 255, 0, 0.3);
            border-color: #0f0;
            animation: successPulse 0.5s;
        }
        
        .quiz-option.wrong {
            background: rgba(255, 0, 0, 0.3);
            border-color: #f00;
            animation: shake 0.5s;
        }
        
        @keyframes successPulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }
        
        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-10px); }
            75% { transform: translateX(10px); }
        }
        
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.95);
            z-index: 1000;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }
        
        .modal-content {
            background: #000;
            border: 3px solid #ff6600;
            border-radius: 10px;
            padding: 30px;
            max-width: 800px;
            max-height: 90vh;
            overflow-y: auto;
            position: relative;
            box-shadow: 0 0 50px rgba(255, 102, 0, 0.5);
        }
        
        .close-btn {
            position: absolute;
            top: 10px;
            right: 10px;
            background: #f00;
            color: #fff;
            border: none;
            width: 30px;
            height: 30px;
            cursor: pointer;
            font-size: 20px;
            border-radius: 50%;
        }
        
        .modal-content img {
            width: 100%;
            height: auto;
            border: 2px solid #0f0;
            margin: 10px 0;
        }
        
        .glitch {
            animation: glitch 0.3s infinite;
        }
        
        @keyframes glitch {
            0% { transform: translate(0); }
            20% { transform: translate(-2px, 2px); }
            40% { transform: translate(-2px, -2px); }
            60% { transform: translate(2px, 2px); }
            80% { transform: translate(2px, -2px); }
            100% { transform: translate(0); }
        }
        
        .jumpscare {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: #000;
            z-index: 9999;
            justify-content: center;
            align-items: center;
        }
        
        .jumpscare.active {
            display: flex;
            animation: flashScreen 0.1s 5;
        }
        
        @keyframes flashScreen {
            0%, 100% { background: #000; }
            50% { background: #f00; }
        }
        
        .jumpscare-img {
            font-size: 300px;
            animation: scream 0.5s;
        }

.intro-screen {
    display: none;
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100vh;
    background: linear-gradient(135deg, #1a0a00 0%, #0a0a0a 100%);
    z-index: 1000;
    justify-content: center;
    align-items: center;
    padding: 20px;
    overflow-y: auto;
}

.intro-box {
    background: rgba(0, 0, 0, 0.95);
    border: 3px solid #ff6600;
    padding: 40px;
    border-radius: 10px;
    box-shadow: 0 0 50px rgba(255, 102, 0, 0.5);
    max-width: 900px;
    width: 100%;
    animation: fadeIn 1s;
    margin: auto;
    box-sizing: border-box;
}

@keyframes fadeIn {
    from { opacity: 0; transform: scale(0.9); }
    to { opacity: 1; transform: scale(1); }
}

.intro-box h1 {
    color: #0f0;
    font-size: 18px;
    text-align: center;
    margin-bottom: 30px;
    padding: 20px;
    border: 3px solid #0f0;
    border-radius: 5px;
    text-shadow: 0 0 10px #0f0;
    font-family: 'Courier New', monospace;
    letter-spacing: 2px;
    background: rgba(0, 255, 0, 0.05);
    box-shadow: 0 0 20px rgba(0, 255, 0, 0.2);
}

.intro-message {
    color: #0f0;
    font-size: 14px;
    line-height: 1.6;
    margin-bottom: 20px;
}

.signature {
    color: #ff6600;
    font-size: 16px;
    text-align: right;
    margin: 15px 0;
    font-style: italic;
}

/* Responsive mobile */
@media (max-width: 768px) {
  .intro-screen { padding: 10px; }
  .intro-box { padding: 20px; width: 95%; }
  .intro-box h1 { font-size: 14px; padding: 15px; margin-bottom: 20px; letter-spacing: 1px; }
    
.intro-box h1 {
    font-size: 14px;
    padding: 15px;
    margin-bottom: 20px;
    letter-spacing: 1px;
}
    
    .intro-message {
        font-size: 13px;
        line-height: 1.5;
        margin-bottom: 15px;
    }
    
    .intro-message p {
        margin-bottom: 15px !important;
    }
    
    .signature {
        font-size: 14px;
        margin: 10px 0;
    }
    
  .warning-box {
    margin: 15px 0;
    padding: 15px;
    font-size: 16px;
  }
    
    .intro-box button {
        font-size: 14px !important;
        padding: 12px !important;
    }
}

/* NE PAS r√©utiliser @keyframes pulse ici */
@keyframes warnPulse {
  0%, 100% { opacity: 0.1; }
  50% { opacity: 0.5; box-shadow: 0 0 20px rgba(255,0,0,0.35); }
}

.warning-box {
  background: rgba(255, 0, 0, 0.2);
  border: 3px solid #f00;
  padding: 20px;
  text-align: center;
  color: #f00;
  font-size: 20px;
  font-weight: bold;
  margin: 25px 0;
  border-radius: 5px;
  animation: warnPulse 2s infinite;
  box-shadow: 0 0 30px rgba(255, 0, 0, 0.3);
  letter-spacing: 2px;
  width: 100%;
  box-sizing: border-box; /* √©vite le d√©bordement avec la bordure */
}

.final-screen {
    display: none;
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100vh;
    background: rgba(0, 0, 0, 0.95);
    z-index: 2000;
    justify-content: center;
    align-items: center;
}

.final-screen.active {
    display: flex;
}

.final-box {
    max-width: 700px;
    background: rgba(0, 0, 0, 0.95);
    border: 3px solid #0f0;
    padding: 40px;
    border-radius: 10px;
    box-shadow: 0 0 50px rgba(0, 255, 0, 0.8);
    animation: finalAppear 0.5s;
}

@keyframes finalAppear {
    from { transform: scale(0.8); opacity: 0; }
    to { transform: scale(1); opacity: 1; }
}

.final-box h1 {
    color: #0f0;
    text-align: center;
    font-size: 32px;
    margin-bottom: 20px;
    text-shadow: 0 0 20px #0f0;
}

.admin-btn {
    width: 100%;
    padding: 10px;
    background: rgba(102, 126, 234, 0.3);
    color: #fff;
    border: 2px solid #667eea;
    font-weight: bold;
    cursor: pointer;
    border-radius: 5px;
    transition: all 0.3s;
    font-family: 'Courier New', monospace;
}

.admin-btn:hover {
    background: #667eea;
    transform: translateX(5px);
}

.admin-btn:active {
    transform: scale(0.98);
}

#adminPanel::-webkit-scrollbar {
    width: 10px;
}

#adminPanel::-webkit-scrollbar-track {
    background: rgba(0, 0, 0, 0.3);
    border-radius: 10px;
}

#adminPanel::-webkit-scrollbar-thumb {
    background: #667eea;
    border-radius: 10px;
}

#adminPanel::-webkit-scrollbar-thumb:hover {
    background: #764ba2;
}

#adminFloatingBtn:hover {
    transform: scale(1.1) rotate(90deg);
    box-shadow: 0 6px 20px rgba(102, 126, 234, 0.6);
}

.maze-btn {
    background: linear-gradient(135deg, rgba(0, 255, 0, 0.3), rgba(0, 255, 0, 0.1));
    color: #0f0;
    border: 2px solid #0f0;
    font-size: 24px;
    font-weight: bold;
    cursor: pointer;
    border-radius: 8px;
    transition: all 0.2s;
    box-shadow: 0 0 10px rgba(0, 255, 0, 0.3);
    user-select: none;
    -webkit-user-select: none;
    -webkit-tap-highlight-color: transparent;
}

.maze-btn:active {
    transform: scale(0.95);
    background: linear-gradient(135deg, rgba(0, 255, 0, 0.5), rgba(0, 255, 0, 0.3));
    box-shadow: 0 0 20px rgba(0, 255, 0, 0.6);
}

.maze-btn:hover:not(:active) {
    background: linear-gradient(135deg, rgba(0, 255, 0, 0.4), rgba(0, 255, 0, 0.2));
    border-color: #ff6600;
    color: #ff6600;
    box-shadow: 0 0 15px rgba(255, 102, 0, 0.4);
}

.maze-btn:disabled {
    opacity: 0.3;
    cursor: not-allowed;
    background: rgba(100, 100, 100, 0.2);
    border-color: #666;
    color: #666;
}

/* Animation quand on appuie sur un bouton */
@keyframes buttonPress {
    0% { transform: scale(1); }
    50% { transform: scale(0.9); }
    100% { transform: scale(1); }
}

.maze-btn.pressed {
    animation: buttonPress 0.3s;
}

/* Style responsive pour petits √©crans */
@media (max-width: 768px) {
    .maze-btn {
        width: 70px !important;
        height: 70px !important;
        font-size: 28px;
    }
    
    #mazeCanvas {
        width: 100% !important;
        height: auto !important;
        max-width: 300px;
    }
}

/* Emp√™cher le scroll lors du swipe sur mobile */
.terminal-module#mazeModule {
    touch-action: auto;
}

/* Memory Game */
.memory-grid {
    display: grid;
    grid-template-columns: repeat(4, 1fr);
    gap: 10px;
    margin: 20px 0;
}

.memory-card {
    aspect-ratio: 1;
    background: rgba(255, 102, 0, 0.3);
    border: 2px solid #ff6600;
    border-radius: 10px;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 40px;
    cursor: pointer;
    transition: all 0.3s;
    user-select: none;
}

.memory-card:hover:not(.flipped):not(.matched) {
    background: rgba(255, 102, 0, 0.5);
    transform: scale(1.05);
}

.memory-card.flipped {
    background: rgba(0, 255, 0, 0.3);
    border-color: #0f0;
}

.memory-card.matched {
    background: rgba(0, 255, 0, 0.5);
    border-color: #0f0;
    opacity: 0.7;
}

.memory-card .back {
    display: block;
}

.memory-card .front {
    display: none;
}

.memory-card.flipped .back {
    display: none;
}

.memory-card.flipped .front {
    display: block;
}

.stats {
    display: grid;
    grid-template-columns: repeat(4, 1fr);
    gap: 10px;
    margin: 15px 0;
}

.stat-box {
    background: rgba(255, 102, 0, 0.2);
    border: 2px solid #ff6600;
    padding: 10px;
    border-radius: 5px;
    text-align: center;
}

.stat-label {
    color: #0f0;
    font-size: 12px;
    margin-bottom: 5px;
}

.stat-value {
    color: #ff6600;
    font-size: 20px;
    font-weight: bold;
}

@keyframes shake {
    0%, 100% { transform: translateX(0); }
    25% { transform: translateX(-10px); }
    75% { transform: translateX(10px); }
}

.shake {
    animation: shake 0.3s;
}
        
        @keyframes scream {
            0% { transform: scale(0); opacity: 0; }
            50% { transform: scale(1.2); }
            100% { transform: scale(1); opacity: 1; }
        }
        
        @keyframes slideIn {
            from { transform: translateX(400px); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }
        
        @keyframes slideOut {
            from { transform: translateX(0); opacity: 1; }
            to { transform: translateX(400px); opacity: 0; }
        }
    </style>
</head>
<body>
<!-- 1. BOUTON FLOTTANT ADMIN (√† ajouter apr√®s la balise <body>) -->
<div id="adminFloatingBtn" style="
    position: fixed;
    bottom: 20px;
    right: 20px;
    width: 60px;
    height: 60px;
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    border: 3px solid #fff;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    z-index: 10001;
    box-shadow: 0 4px 15px rgba(102, 126, 234, 0.4);
    transition: all 0.3s;
    font-size: 24px;
" onclick="toggleAdminPanel()">
    üîß
</div>

<!-- 2. PANNEAU ADMIN (√† ajouter apr√®s le bouton) -->
<div id="adminPanel" style="
    display: none;
    position: fixed;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    background: linear-gradient(135deg, #1e1e2e 0%, #2d2d44 100%);
    border: 3px solid #667eea;
    border-radius: 15px;
    padding: 30px;
    z-index: 10002;
    box-shadow: 0 10px 50px rgba(0, 0, 0, 0.8);
    max-width: 600px;
    width: 90%;
    max-height: 80vh;
    overflow-y: auto;
">
    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
        <h2 style="color: #667eea; margin: 0; font-size: 24px;">
            üîß PANNEAU ADMINISTRATEUR
        </h2>
        <button onclick="closeAdminPanel()" style="
            background: #f00;
            color: #fff;
            border: none;
            width: 35px;
            height: 35px;
            border-radius: 50%;
            cursor: pointer;
            font-size: 20px;
            font-weight: bold;
        ">√ó</button>
    </div>

    <!-- Authentification Admin -->
    <div id="adminAuth" style="text-align: center;">
        <p style="color: #fff; margin-bottom: 15px;">Entrez le code administrateur :</p>
        <input type="password" id="adminPassword" placeholder="Code Admin" style="
            width: 100%;
            padding: 12px;
            background: rgba(0, 0, 0, 0.6);
            border: 2px solid #667eea;
            color: #fff;
            font-family: 'Courier New', monospace;
            font-size: 16px;
            text-align: center;
            border-radius: 5px;
            margin-bottom: 15px;
        " onkeypress="if(event.key === 'Enter') checkAdminPassword()">
        <button onclick="checkAdminPassword()" style="
            width: 100%;
            padding: 12px;
            background: #667eea;
            color: #fff;
            border: none;
            font-weight: bold;
            cursor: pointer;
            border-radius: 5px;
            font-size: 16px;
        ">D√âVERROUILLER</button>
        <div id="adminAuthError" style="color: #f00; margin-top: 10px;"></div>
    </div>

    <!-- Contr√¥les Admin (masqu√© par d√©faut) -->
    <div id="adminControls" style="display: none;">
        
        <!-- Section √âtat du jeu -->
        <div style="background: rgba(0,0,0,0.4); padding: 15px; border-radius: 10px; margin-bottom: 20px;">
            <h3 style="color: #0f0; margin-bottom: 15px; font-size: 18px;">üìä √âTAT DU JEU</h3>
            <div id="gameStatus" style="color: #fff; font-size: 14px; line-height: 1.8;"></div>
        </div>

        <!-- Section Contr√¥les rapides -->
        <div style="background: rgba(0,0,0,0.4); padding: 15px; border-radius: 10px; margin-bottom: 20px;">
            <h3 style="color: #ff6600; margin-bottom: 15px; font-size: 18px;">‚ö° CONTR√îLES RAPIDES</h3>
            
            <button onclick="adminResetGame()" style="
                width: 100%;
                padding: 12px;
                background: #f00;
                color: #fff;
                border: none;
                font-weight: bold;
                cursor: pointer;
                border-radius: 5px;
                margin-bottom: 10px;
            ">üîÑ R√âINITIALISER TOUT LE JEU</button>

            <button onclick="adminUnlockAll()" style="
                width: 100%;
                padding: 12px;
                background: #0f0;
                color: #000;
                border: none;
                font-weight: bold;
                cursor: pointer;
                border-radius: 5px;
                margin-bottom: 10px;
            ">üîì D√âBLOQUER TOUTES LES √âTAPES</button>

            <button onclick="adminSkipToFiles()" style="
                width: 100%;
                padding: 12px;
                background: #667eea;
                color: #fff;
                border: none;
                font-weight: bold;
                cursor: pointer;
                border-radius: 5px;
            ">‚è≠Ô∏è ALLER AUX DOSSIERS FINAUX</button>
        </div>

        <!-- Section D√©blocage par √©tape -->
        <div style="background: rgba(0,0,0,0.4); padding: 15px; border-radius: 10px; margin-bottom: 20px;">
            <h3 style="color: #667eea; margin-bottom: 15px; font-size: 18px;">üéØ D√âBLOCAGE PAR √âTAPE</h3>
            
            <div class="admin-step-control" style="margin-bottom: 10px;">
                <button onclick="adminUnlockStep('enigma')" class="admin-btn">
                    üß© D√©bloquer Quiz
                </button>
            </div>

            <div class="admin-step-control" style="margin-bottom: 10px;">
                <button onclick="adminUnlockStep('code')" class="admin-btn">
                    üîê D√©bloquer Code S√©curit√©
                </button>
            </div>

            <div class="admin-step-control" style="margin-bottom: 10px;">
                <button onclick="adminUnlockStep('simon')" class="admin-btn">
                    üéÆ D√©bloquer Simon Says
                </button>
            </div>

            <div class="admin-step-control" style="margin-bottom: 10px;">
                <button onclick="adminUnlockStep('puzzle')" class="admin-btn">
                    üß© D√©bloquer Puzzle
                </button>
            </div>

            <div class="admin-step-control" style="margin-bottom: 10px;">
                <button onclick="adminUnlockStep('maze')" class="admin-btn">
                    üó∫Ô∏è D√©bloquer Labyrinthe
                </button>
            </div>

            <div class="admin-step-control" style="margin-bottom: 10px;">
                <button onclick="adminUnlockStep('memory')" class="admin-btn">
                    üß† D√©bloquer Memory
                </button>
            </div>

            <div class="admin-step-control">
                <button onclick="adminUnlockStep('files')" class="admin-btn">
                    üìÅ D√©bloquer Dossiers
                </button>
            </div>
        </div>

        <!-- Section Codes et R√©ponses -->
        <div style="background: rgba(0,0,0,0.4); padding: 15px; border-radius: 10px;">
            <h3 style="color: #ff6600; margin-bottom: 15px; font-size: 18px;">üîë CODES ET R√âPONSES</h3>
            <div style="color: #0f0; font-size: 13px; line-height: 2;">
                <div>üîí Cadenas: <span style="color: #ff6600; font-weight: bold;">3-2-1-7</span></div>
                <div>üßÆ Code additif: <span style="color: #ff6600; font-weight: bold;">124</span></div>
                <div>üìù Quiz citrouilles: <span style="color: #ff6600; font-weight: bold;">C) 96 citrouilles</span></div>
                <div>üîê C√©sar: <span style="color: #ff6600; font-weight: bold;">D√©calage 3</span></div>
                <div>üí¨ Message d√©crypt√©: <span style="color: #ff6600; font-weight: bold;">FUYEZ DES CITROUILLES</span></div>
            </div>
        </div>

    </div>
</div>

    <div class="particles" id="particles"></div>
    <div id="bloodDrips"></div>
    <div class="jumpscare" id="jumpscare">
        <div class="jumpscare-img">üíÄ</div>
    </div>
    
    <div class="login-screen" id="loginScreen">
        <div class="pumpkin-bg">üéÉ</div>
        <div class="login-box">
            <h1>üéÉ PROJET CITROUILLE üéÉ</h1>
            <p class="subtitle">SYST√àME DE S√âCURIT√â NIVEAU 5</p>
            
            <div class="warning">
                ‚ö†Ô∏è AVERTISSEMENT : Acc√®s restreint au personnel autoris√© uniquement. Toute tentative d'intrusion sera enregistr√©e et signal√©e.
            </div>
            
            <input type="password" id="passwordInput" placeholder="CODE D'ACC√àS" maxlength="8" autocomplete="off">
            <button onclick="checkPassword()">ACTIVER LE PROTOCOLE</button>
            
            <div class="error-msg" id="errorMsg"></div>
        </div>
    </div>
    
	<div class="intro-screen" id="introScreen">
		<div class="intro-box">
			<h1>PROTOCOLES DE S√âLECTION ACTIV√âS</h1>
			
			<div class="intro-message">
				<p style="margin-bottom: 20px;">
					"Avant que mes assistants ne disparaissent un √† un, je les testais. 
					Seuls les plus comp√©tents pouvaient acc√©der √† mon atelier secret 
					et d√©couvrir la v√©ritable nature de mon projet.
				</p>
				
				<p style="margin-bottom: 20px;">
					Vous avez trouv√© le code <span style="color: #ff6600; font-weight: bold;">CYLINDRE</span>.
					Vous avez d√©chiffr√© mes messages.
				</p>
				
				<p style="margin-bottom: 20px;">
					Maintenant, prouvez-moi que vous m√©ritez d'acc√©der aux documents finaux.
					Prouvez que vous auriez pu survivre √† mes c√¥t√©s... et que vous √™tes dignes d'acc√©der √† ma cr√©ation final !"
				</p>
			</div>
			
			<div class="signature">
				- Le M√©canicien
			</div>
			
			<div class="warning-box">
				‚ö†Ô∏è 7 TESTS √Ä R√âUSSIR ‚ö†Ô∏è
			</div>
			
			<button onclick="startTests()" style="font-size: 18px; padding: 15px;">
				COMMENCER LES TESTS
			</button>
		</div>
	</div>

    <div class="activation-screen" id="activationScreen">
        <canvas class="matrix-bg" id="matrixCanvas"></canvas>
        <div class="activation-content">
            <div class="pumpkin-flash">üéÉ</div>
            <div class="activation-text">PROTOCOLE ACTIV√â</div>
            <div class="activation-text" style="font-size: 20px;">Initialisation du syst√®me...</div>
            <div class="progress-bar">
                <div class="progress-fill"></div>
            </div>
        </div>
    </div>
    
    <div class="terminal-screen" id="terminalScreen">
        <div class="terminal-header">
            <h1>üéÉ PROJET CITROUILLE - TERMINAL DE CONTR√îLE üéÉ</h1>
            <p class="status">STATUS: ‚úì SYST√àME OP√âRATIONNEL | DATE: 31/10/2025 | NIVEAU D'ALERTE: √âLEV√â</p>
        </div>
        
        <div class="progress-tracker">
            <div class="progress-step active" id="step1">
                <div style="font-size: 30px;">üîä</div>
                <div>√âTAPE 1</div>
                <div style="font-size: 12px;">Cadenas</div>
            </div>
            <div class="progress-step locked" id="step2">
                <div style="font-size: 30px;">üß©</div>
                <div>√âTAPE 2</div>
                <div style="font-size: 12px;">Quiz</div>
            </div>
            <div class="progress-step locked" id="step3">
                <div style="font-size: 30px;">üéÆ</div>
                <div>√âTAPE 3</div>
                <div style="font-size: 12px;">Mini-jeux</div>
            </div>
            <div class="progress-step locked" id="step4">
                <div style="font-size: 30px;">üìÅ</div>
                <div>√âTAPE 4</div>
                <div style="font-size: 12px;">Dossiers</div>
            </div>
        </div>
        
        <div class="terminal-content">
            <div class="terminal-module" id="audioModule">
                <div class="module-header">
                    <span class="module-icon">üîä</span>
                    <span class="module-title">ENREGISTREMENT VOCAL</span>
                </div>
                <div class="module-content">
                    <p style="color: #ff6600; margin-bottom: 10px;">‚ö†Ô∏è MESSAGE DU DR. HALLOWEEN</p>
                    <audio class="audio-player" controls id="mainAudio">
                        <source src="EnregistrementVocal.mp3" type="audio/mpeg">
                    </audio>
                    <p style="font-size: 12px; margin-top: 15px; color: #0f0; line-height: 1.6;">
                        üìù Instructions : √âcoutez attentivement le message et comptez les √©l√©ments mentionn√©s dans l'ordre. <br>
                        ‚ò∏Ô∏è Des Indices peuvent √™tre r√©cup√©rer √† la Roue des Gages, contre un sacrifice ...
                    <p style="font-size: 12px; margin-top: 10px; color: #f00;">
                        üéÉ Enregistr√© le 31/10/2025 √† 23:47
                    </p>
                </div>
            </div>
            
            <div class="terminal-module" id="lockModule">
                <div class="module-header">
                    <span class="module-icon">üîí</span>
                    <span class="module-title">CADENAS DE S√âCURIT√â</span>
                </div>
                <div class="module-content">
                    <p style="color: #ff6600; margin-bottom: 20px; text-align: center;">
                        Entrez le code √† 4 chiffres pour d√©bloquer l'√©tape suivante
                    </p>
                    
                    <div class="lock-container">
                        <div class="lock-wheel" id="wheel0">
                            <div class="wheel-numbers">
                                <div class="number">9</div>
                                <div class="number active">0</div>
                                <div class="number">1</div>
                            </div>
                            <div class="wheel-buttons">
                                <button class="wheel-btn up" onclick="rotateWheel(0, 1)">‚ñ≤</button>
                                <button class="wheel-btn down" onclick="rotateWheel(0, -1)">‚ñº</button>
                            </div>
                        </div>
                        
                        <div class="lock-wheel" id="wheel1">
                            <div class="wheel-numbers">
                                <div class="number">9</div>
                                <div class="number active">0</div>
                                <div class="number">1</div>
                            </div>
                            <div class="wheel-buttons">
                                <button class="wheel-btn up" onclick="rotateWheel(1, 1)">‚ñ≤</button>
                                <button class="wheel-btn down" onclick="rotateWheel(1, -1)">‚ñº</button>
                            </div>
                        </div>
                        
                        <div class="lock-wheel" id="wheel2">
                            <div class="wheel-numbers">
                                <div class="number">9</div>
                                <div class="number active">0</div>
                                <div class="number">1</div>
                            </div>
                            <div class="wheel-buttons">
                                <button class="wheel-btn up" onclick="rotateWheel(2, 1)">‚ñ≤</button>
                                <button class="wheel-btn down" onclick="rotateWheel(2, -1)">‚ñº</button>
                            </div>
                        </div>
                        
                        <div class="lock-wheel" id="wheel3">
                            <div class="wheel-numbers">
                                <div class="number">9</div>
                                <div class="number active">0</div>
                                <div class="number">1</div>
                            </div>
                            <div class="wheel-buttons">
                                <button class="wheel-btn up" onclick="rotateWheel(3, 1)">‚ñ≤</button>
                                <button class="wheel-btn down" onclick="rotateWheel(3, -1)">‚ñº</button>
                            </div>
                        </div>
                    </div>
                    
                    <button onclick="checkLockCode()" style="margin-top: 30px; width: 100%;">
                        üîì D√âVERROUILLER
                    </button>
                    
                    <div id="lockResult" style="text-align: center; margin-top: 15px;"></div>
                    
                    <p style="font-size: 12px; margin-top: 20px; color: #ff6600; text-align: center;">
                        üí° Indice : Comptez ce que le Dr. Halloween vous demande de compter dans l'audio
                    </p>
                </div>
            </div>
            
            <div class="terminal-module locked" id="enigmaModule">
                <div class="module-header">
                    <span class="module-icon">üß©</span>
                    <span class="module-title">√âNIGME DU LABORATOIRE</span>
                </div>
                <div class="module-content">
                    <div class="enigma-box">
                        <h3>Question du Dr. Halloween :</h3>
                        <p>"Dans mon laboratoire, Au matin du jour 1, j‚Äôai cr√©er 3 citrouilles. Chaque nuit, chaque citrouille se dupliquent. Apr√®s 5 nuits, combien de citrouilles ai-je ?"</p>
                        
                        <div class="quiz-option" onclick="checkQuiz(this, false)">
                            A) 15 citrouilles
                        </div>
                        <div class="quiz-option" onclick="checkQuiz(this, false)">
                            B) 36 citrouilles
                        </div>
                        <div class="quiz-option" onclick="checkQuiz(this, false)">
                            C) 48 citrouilles
                        </div>
                        <div class="quiz-option" onclick="checkQuiz(this, true)">
                            D) 96 citrouilles
                        </div>
                        <div class="quiz-option" onclick="checkQuiz(this, false)">
                            E) 128 citrouilles
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="terminal-module locked" id="codeModule">
                <div class="module-header">
                    <span class="module-icon">üîê</span>
                    <span class="module-title">CODE DE S√âCURIT√â</span>
                </div>
                <div class="module-content">
                    <div class="enigma-box">
                        <h3>D√©chiffrez le code :</h3>
                        <p style="color: #ff6600; font-size: 18px; text-align: center; margin: 20px 0;">
                            C=3 | I=9 | T=20 | R=18 | O=15 | U=21 | L=12 | E=5
                        </p>
                        <p>Additionnez toutes les lettres du mot "CITROUILLE"</p>
                        
                        <input type="text" id="codeInput" placeholder="Entrez le code" style="margin-top: 15px;">
                        <button onclick="checkCode()">VALIDER</button>
                        <div id="codeResult"></div>
                    </div>
                </div>
            </div>
            
            <div class="terminal-module locked" id="simonModule">
                <div class="module-header">
                    <span class="module-icon">üéÆ</span>
                    <span class="module-title">S√âQUENCE DE RECONNAISSANCE</span>
                </div>
                <div class="module-content">
                    <div class="enigma-box">
                        <h3>Simon Says - Version Halloween</h3>
                        <p>M√©morisez et r√©p√©tez la s√©quence de symboles !</p>
                        <p style="color: #ff6600; margin: 10px 0;">Niveau: <span id="simonLevel">1</span></p>
                        
                        <div class="simon-grid">
                            <div class="simon-button" data-icon="0" onclick="simonClick(0)">
                                <span class="simon-icon">üéÉ</span>
                            </div>
                            <div class="simon-button" data-icon="1" onclick="simonClick(1)">
                                <span class="simon-icon">üëª</span>
                            </div>
                            <div class="simon-button" data-icon="2" onclick="simonClick(2)">
                                <span class="simon-icon">üíÄ</span>
                            </div>
                            <div class="simon-button" data-icon="3" onclick="simonClick(3)">
                                <span class="simon-icon">ü¶á</span>
                            </div>
                        </div>
                        
                        <button onclick="startSimon()" id="simonStartBtn" style="margin-top: 15px; width: 100%;">
                            D√âMARRER NIVEAU 1
                        </button>
                        <div id="simonResult" style="text-align: center; margin-top: 10px;"></div>
                    </div>
                </div>
            </div>
            
            <div class="terminal-module locked" id="puzzleModule">
                <div class="module-header">
                    <span class="module-icon">üß©</span>
                    <span class="module-title">RECONSTRUCTION D'IMAGE</span>
                </div>
                <div class="module-content">
                    <div class="enigma-box">
                        <h3>Puzzle du Laboratoire</h3>
                        <p>Reconstituez l'image du Projet Citrouille !</p>
                        
                        <div class="puzzle-container" id="puzzleContainer">
                            <!-- G√©n√©r√© dynamiquement -->
                        </div>
                        
                        <div style="display: flex; gap: 10px; margin-top: 15px;">
                            <button onclick="shufflePuzzle()" style="flex: 1;">
                                üîÄ M√âLANGER
                            </button>
                            <button onclick="togglePuzzleNumbers()" class="help-btn" style="flex: 1;">
                                üî¢ AIDE
                            </button>
                        </div>
                        
                        <div id="puzzleResult" style="text-align: center; margin-top: 10px;"></div>
                        
                        <p style="font-size: 12px; margin-top: 15px; color: #ff6600; text-align: center;">
                            üí° Cliquez sur une pi√®ce adjacente √† la case vide
                        </p>
                    </div>
                </div>
            </div>
            
			<div class="terminal-module locked" id="mazeModule">
				<div class="module-header">
					<span class="module-icon">üó∫Ô∏è</span>
					<span class="module-title">LABYRINTHE D'√âVACUATION</span>
				</div>
				<div class="module-content">
					<div class="enigma-box">
						<h3>Trouvez la sortie</h3>
						<p>Utilisez les fl√®ches du clavier ou les boutons ci-dessous</p>
						
						<canvas id="mazeCanvas" width="300" height="300" style="border: 2px solid #0f0; background: #000; display: block; margin: 15px auto;"></canvas>
						
						<!-- NOUVEAUX CONTR√îLES TACTILES -->
						<div style="display: flex; flex-direction: column; align-items: center; margin: 20px 0; gap: 5px;">
							<!-- Bouton Haut -->
							<button onclick="moveMazePlayer('up')" class="maze-btn" style="width: 60px; height: 60px;">
								‚ñ≤
							</button>
							
							<!-- Boutons Gauche, Centre, Droite -->
							<div style="display: flex; gap: 5px;">
								<button onclick="moveMazePlayer('left')" class="maze-btn" style="width: 60px; height: 60px;">
									‚óÄ
								</button>
								
								<div style="width: 60px; height: 60px; display: flex; align-items: center; justify-content: center; background: rgba(0,0,0,0.5); border: 2px solid #666; border-radius: 5px; font-size: 20px;">
									üéÉ
								</div>
								
								<button onclick="moveMazePlayer('right')" class="maze-btn" style="width: 60px; height: 60px;">
									‚ñ∂
								</button>
							</div>
							
							<!-- Bouton Bas -->
							<button onclick="moveMazePlayer('down')" class="maze-btn" style="width: 60px; height: 60px;">
								‚ñº
							</button>
						</div>
						
						<div style="text-align: center; margin-top: 10px; color: #ff6600;">
							Position: <span id="mazePos">D√©but</span>
						</div>
						<div id="mazeResult" style="text-align: center; margin-top: 10px;"></div>
						
						<!-- Bouton Reset -->
						<button onclick="resetMaze()" style="
							width: 100%;
							padding: 10px;
							background: rgba(255, 102, 0, 0.3);
							color: #ff6600;
							border: 2px solid #ff6600;
							font-weight: bold;
							cursor: pointer;
							border-radius: 5px;
							margin-top: 15px;
							transition: all 0.3s;
						" onmouseover="this.style.background='rgba(255,102,0,0.5)'" onmouseout="this.style.background='rgba(255,102,0,0.3)'">
							üîÑ RECOMMENCER LE LABYRINTHE
						</button>
					</div>
				</div>
			</div>
            
            <!-- Module Memory Game -->
            <div class="terminal-module locked" id="memoryModule">
                <div class="module-header">
                    <span class="module-icon">üß†</span>
                    <span class="module-title">MEMORY HALLOWEEN</span>
                </div>
                
                <div class="module-content">
                    <div class="enigma-box">
                        <h3>Trouvez les paires</h3>
                        <p>üéÉ Memoriser et assembler les symboles Halloween !</p>

                        <div class="challenge-description">
                            <p style="color: #ff6600; font-size: 14px;">‚ö†Ô∏è Attention : vous n'avez que 9 vies !</p>
                        </div>
                        
                        <!-- Statistiques -->
                        <div class="stats">
                            <div class="stat-box">
                                <div class="stat-label">Coups</div>
                                <div class="stat-value" id="memoryMoves">0</div>
                            </div>
                            <div class="stat-box">
                                <div class="stat-label">Paires</div>
                                <div class="stat-value" id="memoryPairs">0/8</div>
                            </div>
                            <div class="stat-box">
                                <div class="stat-label">Vies</div>
                                <div class="stat-value" id="memoryLives" style="color: #f00;">‚ù§Ô∏è‚ù§Ô∏è‚ù§Ô∏è‚ù§Ô∏è‚ù§Ô∏è‚ù§Ô∏è‚ù§Ô∏è‚ù§Ô∏è‚ù§Ô∏è</div>
                            </div>
                            <div class="stat-box">
                                <div class="stat-label">Temps</div>
                                <div class="stat-value" id="memoryTime">0s</div>
                            </div>
                        </div>
                        
                        <!-- Grille du jeu -->
                        <div class="memory-grid" id="memoryGrid"></div>
                        
                        <!-- Bouton -->
                        <button class="game-button" onclick="startMemory()">NOUVELLE PARTIE</button>
                        
                        <!-- Message de r√©sultat -->
                        <div id="memoryResult" style="text-align: center; margin-top: 20px; font-weight: bold;"></div>
                    </div>
                </div>
            </div>
            
            <div class="terminal-module locked" id="filesModule">
                <div class="module-header">
                    <span class="module-icon">üìÅ</span>
                    <span class="module-title">DOSSIERS CLASSIFI√âS</span>
                </div>
                <div class="module-content">
                    <ul class="file-list">
                        <li class="file-item" onclick="openFile('secret')">
                            üéÉ PROJET_CITROUILLE_PLAN.img
                        </li>
                        <li class="file-item" onclick="openFile('specimen')">
                            üß™ DOSSIER_SPECIMEN_001.img
                        </li>
                        <li class="file-item" onclick="openFile('lab')">
                            üî¨ LABORATOIRE_PHOTOS.img
                        </li>
                        <li class="file-item" onclick="openFile('warning')">
                            ‚ö†Ô∏èüî¶ AVERTISSEMENT_FINAL.img 
                        </li>

                    </ul>
                </div>
            </div>
            
            <div class="terminal-module">
                <div class="module-header">
                    <span class="module-icon">üìù</span>
                    <span class="module-title">NOTES DU LABORATOIRE</span>
                </div>
                <div class="module-content">
               <p style="color: #ff6600;">JOURNAL DU DR. HALLOWEEN</p>
                    <p style="margin: 10px 0; line-height: 1.6;">
                        Jour 31 : L'exp√©rience a d√©pass√© toutes nos attentes... 
                        ou nos pires cauchemars. Les citrouilles ont d√©velopp√© 
                        une conscience. Elles grandissent. Elles observent. 
                        <span class="glitch" style="color: #f00;">ELLES ATTENDENT.</span>
                    </p>
                    <p style="color: #f00; font-size: 12px;">
                        ‚ö†Ô∏è DERNIER CONTACT: 31/10/2025 - 23:59
                    </p>
                </div>
            </div>
			
			<div class="terminal-module" style="border-color: #ff6600; box-shadow: 0 0 20px rgba(255, 102, 0, 0.3);">
				<div class="module-header">
					<span class="module-icon">üéÆ</span>
					<span class="module-title">ZONE DE D√âTENTE</span>
				</div>
				<div class="module-content">
					<p style="color: #ff6600; font-weight: bold; text-align: center; font-size: 18px; margin-bottom: 10px;">
						üéÉ MINI-JEUX BONUS üéÉ
					</p>
					<div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 10px; margin: 15px 0; text-align: center;">
						<div style="background: rgba(255, 102, 0, 0.2); padding: 10px; border: 1px solid #ff6600; border-radius: 5px;">
							<div style="font-size: 24px;">üéØ</div>
							<div style="font-size: 12px; color: #0f0;">Tir aux citrouilles</div>
						</div>
						<div style="background: rgba(255, 102, 0, 0.2); padding: 10px; border: 1px solid #ff6600; border-radius: 5px;">
							<div style="font-size: 24px;">ü™¶</div>
							<div style="font-size: 12px; color: #0f0;">Pendu</div>
						</div>
						<div style="background: rgba(255, 102, 0, 0.2); padding: 10px; border: 1px solid #ff6600; border-radius: 5px;">
							<div style="font-size: 24px;">‚å®Ô∏è</div>
							<div style="font-size: 12px; color: #0f0;">Typing</div>
						</div>
					</div>
					<a href="minijeux.html" target="_blank" style="display: block; padding: 15px; background: #ff6600; color: #000; text-align: center; text-decoration: none; border-radius: 5px; font-weight: bold; margin-top: 15px; transition: all 0.3s; font-size: 16px;">
						üéÆ JOUER MAINTENANT
					</a>
				</div>
			</div>
            
            <div class="terminal-module" style="border-color: #f00;">
                <div class="module-header">
                    <span class="module-icon">‚ö†Ô∏è</span>
                    <span class="module-title" style="color: #f00;">ALERTE CRITIQUE</span>
                </div>
                <div class="module-content" style="color: #f00;">
                    <p class="glitch" style="font-weight: bold;">
                        üéÉ CONFINEMENT COMPROMIS üéÉ
                    </p>
                    <p style="line-height: 1.6; margin-top: 10px;">
                        PROTOCOLE D'√âVACUATION ACTIV√â<br>
                        TEMPS RESTANT: [INCONNU]<br>
                        NIVEAU DE DANGER: MAXIMUM<br>
                        <span style="color: #ff6600;">NE RESTEZ PAS SEUL DANS LE NOIR</span><br>
                        Le projet √† pris vie !
                    </p>
                </div>
            </div>
        </div>
    </div>
    
    <div class="modal" id="imageModal">
        <div class="modal-content">
            <button class="close-btn" onclick="closeModal()">√ó</button>
            <h2 style="color: #ff6600; margin-bottom: 20px;" id="modalTitle"></h2>
            <div id="modalContent"></div>
        </div>
    </div>
    
    <script>
        const PASSWORD = "CYLINDRE";
        let quizAnswered = false;
        window.attemptCount = 0;
        window.filesOpened = new Set();
        window.errorCount = 0;
        
        let wheelValues = [0, 0, 0, 0];
        const CORRECT_CODE = [3, 2, 1, 7];
        
        let simonSequence = [];
        let simonPlayerSequence = [];
        let simonRound = 0;
        const simonIcons = ['üéÉ', 'üëª', 'üíÄ', 'ü¶á'];
        
        let puzzlePieces = [];
        let puzzleSolved = false;
        let showNumbers = false;
        let masterCanvas = null;
        
        
		function triggerJumpscare() {
			const jumpscare = document.getElementById('jumpscare');
			const img = jumpscare.querySelector('.jumpscare-img');
			
			const scares = [
				{ emoji: 'üíÄ', duration: 800 },
				{ emoji: 'üëª', duration: 1000 },
				{ emoji: 'üéÉ', duration: 1200 },
				{ emoji: 'üî™', duration: 1500 },
				{ emoji: 'üò±', duration: 2000 },
				{ emoji: 'üßü', duration: 900 },
				{ emoji: '‚ò†Ô∏è', duration: 1100 },
				{ emoji: 'üëπ', duration: 1300 }
			];
			
			// S√©lection al√©atoire d'un jumpscare
			const randomScare = scares[Math.floor(Math.random() * scares.length)];
			
			img.textContent = randomScare.emoji;
			img.style.fontSize = (200 + Math.random() * 100) + 'px';
			
			jumpscare.classList.add('active');
			jumpscare.style.animationDuration = '0.05s';
			jumpscare.style.animationIterationCount = Math.floor(5 + Math.random() * 10);
			
			setTimeout(() => {
				jumpscare.classList.remove('active');
				jumpscare.style.animationDuration = '0.1s';
				jumpscare.style.animationIterationCount = '5';
				// R√©initialiser l'ic√¥ne pour qu'elle ne reste pas visible
				img.textContent = '';
				img.style.fontSize = '300px';
			}, randomScare.duration);
		}
        
        function rotateWheel(wheelIndex, direction) {
            wheelValues[wheelIndex] = (wheelValues[wheelIndex] + direction + 10) % 10;
            updateWheelDisplay(wheelIndex);
        }
        
        function updateWheelDisplay(wheelIndex) {
            const wheel = document.getElementById('wheel' + wheelIndex);
            const numbers = wheel.querySelectorAll('.number');
            const currentValue = wheelValues[wheelIndex];
            
            numbers[0].textContent = (currentValue - 1 + 10) % 10;
            numbers[1].textContent = currentValue;
            numbers[2].textContent = (currentValue + 1) % 10;
            
            numbers.forEach(num => num.classList.remove('active'));
            numbers[1].classList.add('active');
        }
        
        function checkLockCode() {
            const result = document.getElementById('lockResult');
            
            if (JSON.stringify(wheelValues) === JSON.stringify(CORRECT_CODE)) {
                result.innerHTML = '<p style="color: #0f0; font-weight: bold; font-size: 18px;">‚úì CADENAS D√âVERROUILL√â !</p>';
                
                setTimeout(() => {
                    document.getElementById('step1').classList.remove('active');
                    document.getElementById('step1').classList.add('completed');
                    document.getElementById('step2').classList.remove('locked');
                    document.getElementById('step2').classList.add('active');
                    document.getElementById('enigmaModule').classList.remove('locked');
                    showNotification('‚úì √âTAPE 1 COMPL√âT√âE - √ânigme d√©bloqu√©e !', '#0f0');
                    
                    document.querySelectorAll('.lock-wheel').forEach(wheel => {
                        wheel.style.borderColor = '#0f0';
                        wheel.style.boxShadow = '0 0 30px rgba(0, 255, 0, 0.5)';
                    });
                }, 500);
            } else {
                result.innerHTML = '<p style="color: #f00; font-weight: bold;">‚úó CODE INCORRECT</p>';
                
                document.querySelectorAll('.lock-wheel').forEach(wheel => {
                    wheel.style.animation = 'shake 0.5s';
                });
                
                triggerJumpscare();
                
                setTimeout(() => {
                    result.innerHTML = '';
                    document.querySelectorAll('.lock-wheel').forEach(wheel => {
                        wheel.style.animation = '';
                    });
                }, 2000);
            }
        }
        
        function createParticles() {
            const particles = document.getElementById('particles');
            const emojis = ['üéÉ', 'üçÇ', 'üçÅ', 'üíÄ', 'ü¶á', 'üï∑Ô∏è'];
            
            for (let i = 0; i < 20; i++) {
                const particle = document.createElement('div');
                particle.className = 'particle';
                particle.textContent = emojis[Math.floor(Math.random() * emojis.length)];
                particle.style.left = Math.random() * 100 + '%';
                particle.style.animationDelay = Math.random() * 15 + 's';
                particle.style.animationDuration = (10 + Math.random() * 10) + 's';
                particles.appendChild(particle);
            }
        }
        
        function createBloodDrips() {
            const container = document.getElementById('bloodDrips');
            
            setInterval(() => {
                const drip = document.createElement('div');
                drip.className = 'blood-drip';
                drip.style.left = Math.random() * 100 + '%';
                container.appendChild(drip);
                setTimeout(() => drip.remove(), 3000);
            }, 2000);
        }
       
        
        function checkPassword() {
            const input = document.getElementById('passwordInput').value.toUpperCase();
            const errorMsg = document.getElementById('errorMsg');
            
            if (input === PASSWORD) {
                errorMsg.className = 'success-msg';
                errorMsg.textContent = '‚úì ACC√àS AUTORIS√â';
                setTimeout(startActivation, 500);
            } else {
                errorMsg.className = 'error-msg';
                errorMsg.textContent = '‚úó CODE INCORRECT';
                document.getElementById('passwordInput').value = '';
                window.attemptCount++;
                if (window.attemptCount === 3) {
                    triggerJumpscare();
                    window.attemptCount = 0;
                }
                setTimeout(() => errorMsg.textContent = '', 2000);
            }
        }
        
        document.getElementById('passwordInput').addEventListener('keypress', (e) => {
            if (e.key === 'Enter') checkPassword();
        });
        
        function startActivation() {
            document.getElementById('loginScreen').style.display = 'none';
            document.getElementById('activationScreen').style.display = 'block';
            
            const canvas = document.getElementById('matrixCanvas');
            const ctx = canvas.getContext('2d');
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;
            
            const columns = Math.floor(canvas.width / 20);
            const drops = Array(columns).fill(1);
            
            function drawMatrix() {
                ctx.fillStyle = 'rgba(0, 0, 0, 0.05)';
                ctx.fillRect(0, 0, canvas.width, canvas.height);
                ctx.fillStyle = '#0f0';
                ctx.font = '15px monospace';
                
                for (let i = 0; i < drops.length; i++) {
                    const text = Math.random() > 0.5 ? '1' : '0';
                    ctx.fillText(text, i * 20, drops[i] * 20);
                    if (drops[i] * 20 > canvas.height && Math.random() > 0.975) {
                        drops[i] = 0;
                    }
                    drops[i]++;
                }
            }
            
            const matrixInterval = setInterval(drawMatrix, 50);
            
		setTimeout(() => {
			clearInterval(matrixInterval);
			document.getElementById('activationScreen').style.display = 'none';
			document.getElementById('introScreen').style.display = 'flex';
			createParticles();
			createBloodDrips();
		}, 3000);
        }
        function startTests() {
			document.getElementById('introScreen').style.display = 'none';
			document.getElementById('terminalScreen').style.display = 'block';
		}
        function unlockStep2() {
            document.getElementById('step1').classList.remove('active');
            document.getElementById('step1').classList.add('completed');
            document.getElementById('step2').classList.remove('locked');
            document.getElementById('step2').classList.add('active');
            document.getElementById('enigmaModule').classList.remove('locked');
            showNotification('‚úì √âTAPE 1 COMPL√âT√âE - √ânigme d√©bloqu√©e !', '#0f0');
        }

        // ==================== MEMORY GAME ====================
const memorySymbols = ['üéÉ', 'üëª', 'üíÄ', 'ü¶á', 'üï∑Ô∏è', 'üï∏Ô∏è', 'üßô', 'üßõ'];
let memoryCards = [];
let flippedCards = [];
let matchedPairs = 0;
let memoryMoves = 0;
let memoryLives = 5;
let memoryStartTime = 0;
let memoryTimerInterval;
let memorySolved = false;

function startMemory() {
    const grid = document.getElementById('memoryGrid');
    grid.innerHTML = '';
    flippedCards = [];
    matchedPairs = 0;
    memoryMoves = 0;
    memoryLives = 9;
    memoryStartTime = Date.now();
    memorySolved = false;
    
    document.getElementById('memoryMoves').textContent = '0';
    document.getElementById('memoryPairs').textContent = '0/8';
    document.getElementById('memoryTime').textContent = '0s';
    document.getElementById('memoryLives').textContent = '‚ù§Ô∏è‚ù§Ô∏è‚ù§Ô∏è‚ù§Ô∏è‚ù§Ô∏è‚ù§Ô∏è‚ù§Ô∏è‚ù§Ô∏è‚ù§Ô∏è';
    document.getElementById('memoryLives').style.color = '#f00';
    document.getElementById('memoryResult').innerHTML = '';
    
    // Activer la grille
    grid.style.pointerEvents = 'auto';
    grid.style.opacity = '1';
    
    memoryCards = [...memorySymbols, ...memorySymbols]
        .sort(() => Math.random() - 0.5)
        .map((symbol, index) => ({
            id: index,
            symbol: symbol,
            flipped: false,
            matched: false
        }));
    
    memoryCards.forEach((card, index) => {
        const cardElement = document.createElement('div');
        cardElement.className = 'memory-card';
        cardElement.innerHTML = `
            <span class="back">‚ùì</span>
            <span class="front">${card.symbol}</span>
        `;
        cardElement.onclick = () => flipCard(index, cardElement);
        grid.appendChild(cardElement);
    });
    
    clearInterval(memoryTimerInterval);
    memoryTimerInterval = setInterval(updateMemoryTimer, 1000);
}

function updateMemoryTimer() {
    const elapsed = Math.floor((Date.now() - memoryStartTime) / 1000);
    document.getElementById('memoryTime').textContent = elapsed + 's';
}

function flipCard(index, element) {
    if (flippedCards.length >= 2) return;
    if (memoryCards[index].flipped || memoryCards[index].matched) return;
    
    memoryCards[index].flipped = true;
    element.classList.add('flipped');
    flippedCards.push({ index, element });
    
    if (flippedCards.length === 2) {
        memoryMoves++;
        document.getElementById('memoryMoves').textContent = memoryMoves;
        
        setTimeout(checkMemoryMatch, 600);
    }
}

function checkMemoryMatch() {
    const [card1, card2] = flippedCards;
    
    if (memoryCards[card1.index].symbol === memoryCards[card2.index].symbol) {
        // PAIRE TROUV√âE !
        memoryCards[card1.index].matched = true;
        memoryCards[card2.index].matched = true;
        card1.element.classList.add('matched');
        card2.element.classList.add('matched');
        
        matchedPairs++;
        document.getElementById('memoryPairs').textContent = matchedPairs + '/8';
        
        // VICTOIRE !
        if (matchedPairs === 8) {
            clearInterval(memoryTimerInterval);
            memorySolved = true;
            
            const timeElapsed = document.getElementById('memoryTime').textContent;
            
            setTimeout(() => {
                document.getElementById('memoryResult').innerHTML = `
                    <div style="color: #0f0; font-size: 20px; animation: pulse 1s infinite;">
                        üéâ VICTOIRE ! üéâ<br>
                        <span style="font-size: 16px;">Temps: ${timeElapsed} | Coups: ${memoryMoves}</span>
                    </div>
                `;
                
            document.getElementById('memoryModule').style.borderColor = '#0f0';

            setTimeout(() => {
                document.getElementById('step3').classList.remove('active');
                document.getElementById('step3').classList.add('completed');
                document.getElementById('step4').classList.remove('locked');
                document.getElementById('step4').classList.add('active');
                document.getElementById('filesModule').classList.remove('locked');
                showNotification('‚úì √âTAPE 3 COMPL√âT√âE - Dossiers d√©bloqu√©s !', '#0f0');
                setTimeout(() => {
                    document.getElementById('finalScreen').classList.add('active');
                }, 1500);
                triggerJumpscare();
            }, 1000);
            }, 300);
        }
    } else {
        // ERREUR - Perdre une vie
        memoryLives--;
        
        // Mettre √† jour l'affichage des vies
        const heartsDisplay = '‚ù§Ô∏è'.repeat(memoryLives) + 'üñ§'.repeat(9 - memoryLives);
        document.getElementById('memoryLives').textContent = heartsDisplay;
        
        // Changer la couleur selon les vies restantes
        if (memoryLives <= 2) {
            document.getElementById('memoryLives').style.color = '#ff6600';
        }
        if (memoryLives <= 1) {
            document.getElementById('memoryLives').style.color = '#f00';
        }
        
        memoryCards[card1.index].flipped = false;
        memoryCards[card2.index].flipped = false;
        card1.element.classList.remove('flipped');
        card2.element.classList.remove('flipped');
        card1.element.classList.add('shake');
        card2.element.classList.add('shake');
        
        setTimeout(() => {
            card1.element.classList.remove('shake');
            card2.element.classList.remove('shake');
        }, 300);
        
        // GAME OVER apr√®s 5 erreurs
        if (memoryLives <= 0) {
            clearInterval(memoryTimerInterval);
            
            // Bloquer toutes les cartes
            const grid = document.getElementById('memoryGrid');
            grid.style.pointerEvents = 'none';
            grid.style.opacity = '0.5';
            triggerJumpscare();
            document.getElementById('memoryResult').innerHTML = `
                <div style="color: #f00; font-size: 18px;">
                    üíÄ GAME OVER !<br>
                    <span style="font-size: 14px;">Paires trouv√©es: ${matchedPairs}/8</span>
                </div>
            `;
            
            setTimeout(() => {
                grid.style.pointerEvents = 'auto';
                grid.style.opacity = '1';
                startMemory();
            }, 2000);
        }
    }
    
    flippedCards = [];
}
        
        function checkQuiz(element, isCorrect) {
            if (quizAnswered) return;
            
            if (isCorrect) {
                element.classList.add('correct');
                quizAnswered = true;
                
                setTimeout(() => {
                    document.getElementById('step2').classList.remove('active');
                    document.getElementById('step2').classList.add('completed');
                    document.getElementById('step3').classList.remove('locked');
                    document.getElementById('step3').classList.add('active');
                    document.getElementById('codeModule').classList.remove('locked');
                    showNotification('‚úì √âTAPE 2 COMPL√âT√âE - Code de s√©curit√© d√©bloqu√© !', '#0f0');
                }, 1000);
            } else {
                element.classList.add('wrong');
                triggerJumpscare();
                setTimeout(() => element.classList.remove('wrong'), 500);
            }
        }
       
        
        let simonPlaying = false;
        let simonWaitingForInput = false;
        let simonNeedNewLevel = true;
        
        function startSimon() {
            if (simonPlaying) return;
            
            const btnText = document.getElementById('simonStartBtn').textContent;
            
            if (btnText === 'NIVEAU SUIVANT' || simonNeedNewLevel) {
                simonRound++;
                simonSequence.push(Math.floor(Math.random() * 4));
                document.getElementById('simonLevel').textContent = simonRound;
                simonNeedNewLevel = false;
            }
            
            simonPlayerSequence = [];
            simonWaitingForInput = false;
            simonPlaying = true;
            document.getElementById('simonStartBtn').disabled = true;
            document.getElementById('simonStartBtn').textContent = 'REGARDEZ LA S√âQUENCE...';
            playSimonSequence();
        }
        
        function playSimonSequence() {
            let index = 0;
            const interval = setInterval(() => {
                if (index < simonSequence.length) {
                    const btn = document.querySelector(`.simon-button[data-icon="${simonSequence[index]}"]`);
                    btn.classList.add('active');
                    setTimeout(() => btn.classList.remove('active'), 400);
                    index++;
                } else {
                    clearInterval(interval);
                    simonPlaying = false;
                    simonWaitingForInput = true;
                    document.getElementById('simonStartBtn').disabled = false;
                    document.getElementById('simonStartBtn').textContent = 'REJOUER LA S√âQUENCE';
                }
            }, 600);
        }
        
        function simonClick(icon) {
            if (simonPlaying || !simonWaitingForInput) return;
            
            simonPlayerSequence.push(icon);
            const btn = document.querySelector(`.simon-button[data-icon="${icon}"]`);
            btn.classList.add('active');
            setTimeout(() => btn.classList.remove('active'), 200);
            
            const currentIndex = simonPlayerSequence.length - 1;
            
            if (simonPlayerSequence[currentIndex] !== simonSequence[currentIndex]) {
                document.getElementById('simonResult').innerHTML = '<p style="color: #f00; font-weight: bold;">‚úó ERREUR ! Recommencez ce niveau</p>';
                simonPlayerSequence = [];
                simonWaitingForInput = false;
                document.getElementById('simonStartBtn').textContent = 'REJOUER LA S√âQUENCE';
                triggerJumpscare();
                setTimeout(() => document.getElementById('simonResult').innerHTML = '', 2000);
            } else if (simonPlayerSequence.length === simonSequence.length) {
                simonWaitingForInput = false;
                if (simonRound >= 8) {
                    document.getElementById('simonResult').innerHTML = '<p style="color: #0f0; font-weight: bold;">üéâ S√âQUENCE COMPL√âT√âE - 8 NIVEAUX R√âUSSIS !</p>';
                    document.getElementById('simonModule').style.borderColor = '#0f0';
                    document.getElementById('puzzleModule').classList.remove('locked');
                    document.getElementById('simonStartBtn').disabled = true;
                    document.getElementById('simonStartBtn').textContent = '‚úì TERMIN√â';
                    showNotification('‚úì Simon Says r√©ussi - Puzzle d√©bloqu√© !', '#0f0');
                    initPuzzle();
                } else {
                    document.getElementById('simonResult').innerHTML = '<p style="color: #0f0;">‚úì Niveau ' + simonRound + ' r√©ussi !</p>';
                    simonPlayerSequence = [];
                    simonNeedNewLevel = true;
                    document.getElementById('simonStartBtn').textContent = 'NIVEAU SUIVANT';
                    setTimeout(() => {
                        document.getElementById('simonResult').innerHTML = '';
                    }, 1000);
                }
            }
        }
        
        function generatePuzzleImage() {
            const canvas = document.createElement('canvas');
            canvas.width = 900;  // Augment√© pour meilleure qualit√©
            canvas.height = 900;
            const ctx = canvas.getContext('2d');
            
            // Fond d√©grad√© Halloween
            const gradient = ctx.createRadialGradient(450, 450, 100, 450, 450, 600);
            gradient.addColorStop(0, '#ff6600');
            gradient.addColorStop(0.5, '#ff3300');
            gradient.addColorStop(1, '#8B0000');
            ctx.fillStyle = gradient;
            ctx.fillRect(0, 0, 900, 900);
            
            // Texture de fond
            for (let i = 0; i < 200; i++) {
                ctx.fillStyle = `rgba(0, 0, 0, ${Math.random() * 0.1})`;
                ctx.fillRect(Math.random() * 900, Math.random() * 900, Math.random() * 50, Math.random() * 50);
            }
            
            // Grande citrouille centrale avec d√©tails
            ctx.save();
            ctx.translate(450, 450);
            
            // Ombre de la citrouille
            ctx.fillStyle = 'rgba(0, 0, 0, 0.5)';
            ctx.beginPath();
            ctx.ellipse(0, 280, 280, 40, 0, 0, Math.PI * 2);
            ctx.fill();
            
            // Corps de la citrouille avec d√©grad√©
            const pumpkinGradient = ctx.createRadialGradient(0, 0, 50, 0, 0, 300);
            pumpkinGradient.addColorStop(0, '#ffa500');
            pumpkinGradient.addColorStop(0.7, '#ff8800');
            pumpkinGradient.addColorStop(1, '#ff6600');
            ctx.fillStyle = pumpkinGradient;
            ctx.beginPath();
            ctx.arc(0, 0, 280, 0, Math.PI * 2);
            ctx.fill();
            
            // Rainures verticales (plus d√©taill√©es)
            ctx.strokeStyle = '#cc6600';
            ctx.lineWidth = 12;
            ctx.shadowColor = 'rgba(0, 0, 0, 0.5)';
            ctx.shadowBlur = 10;
            for(let i = -3; i <= 3; i++) {
                ctx.beginPath();
                ctx.moveTo(i * 50, -280);
                ctx.bezierCurveTo(
                    i * 50 - 20, -100,
                    i * 50 + 20, 100,
                    i * 70, 280
                );
                ctx.stroke();
            }
            ctx.shadowBlur = 0;
            
            // Reflets sur la citrouille
            ctx.fillStyle = 'rgba(255, 255, 255, 0.2)';
            ctx.beginPath();
            ctx.ellipse(-80, -100, 60, 100, -0.5, 0, Math.PI * 2);
            ctx.fill();
            
            // Yeux triangulaires avec ombres
            ctx.fillStyle = '#000';
            ctx.shadowColor = 'rgba(255, 102, 0, 0.8)';
            ctx.shadowBlur = 20;
            
            // ≈íil gauche
            ctx.beginPath();
            ctx.moveTo(-110, -50);
            ctx.lineTo(-60, 0);
            ctx.lineTo(-160, 0);
            ctx.closePath();
            ctx.fill();
            
            // ≈íil droit
            ctx.beginPath();
            ctx.moveTo(110, -50);
            ctx.lineTo(160, 0);
            ctx.lineTo(60, 0);
            ctx.closePath();
            ctx.fill();
            
            ctx.shadowBlur = 0;
            
            // Nez triangulaire
            ctx.beginPath();
            ctx.moveTo(0, 20);
            ctx.lineTo(-30, 80);
            ctx.lineTo(30, 80);
            ctx.closePath();
            ctx.fill();
            
            // Bouche effrayante avec dents
            ctx.strokeStyle = '#000';
            ctx.lineWidth = 15;
            ctx.beginPath();
            ctx.arc(0, 100, 120, 0, Math.PI);
            ctx.stroke();
            
            // Dents
            ctx.fillStyle = '#000';
            for(let i = -3; i <= 3; i++) {
                const x = i * 30;
                ctx.fillRect(x - 8, 100 + Math.sqrt(120*120 - x*x) - 5, 16, 30);
            }
            
            // Tige (plus d√©taill√©e)
            ctx.fillStyle = '#228B22';
            ctx.fillRect(-35, -350, 70, 100);
            
            // Texture de la tige
            ctx.strokeStyle = '#1a6b1a';
            ctx.lineWidth = 3;
            for(let i = 0; i < 10; i++) {
                ctx.beginPath();
                ctx.moveTo(-35, -350 + i * 10);
                ctx.lineTo(35, -340 + i * 10);
                ctx.stroke();
            }
            
            // Feuille sur la tige
            ctx.fillStyle = '#32CD32';
            ctx.beginPath();
            ctx.moveTo(35, -300);
            ctx.bezierCurveTo(100, -320, 120, -280, 100, -250);
            ctx.bezierCurveTo(80, -260, 60, -270, 35, -280);
            ctx.closePath();
            ctx.fill();
            
            ctx.restore();
            
            // √âtoiles et particules Halloween
            ctx.fillStyle = '#ffff00';
            for(let i = 0; i < 30; i++) {
                const x = Math.random() * 900;
                const y = Math.random() * 900;
                const size = Math.random() * 3 + 1;
                ctx.beginPath();
                ctx.arc(x, y, size, 0, Math.PI * 2);
                ctx.fill();
            }
            
            // Texte "PROJET CITROUILLE" en haut
            ctx.font = 'bold 48px Arial';
            ctx.fillStyle = '#000';
            ctx.textAlign = 'center';
            ctx.strokeStyle = '#ff6600';
            ctx.lineWidth = 3;
            ctx.strokeText('PROJET CITROUILLE', 450, 80);
            ctx.fillText('PROJET CITROUILLE', 450, 80);
            
            return canvas;
        }

        function initPuzzle() {
            puzzlePieces = [1, 2, 3, 4, 5, 6, 7, 8, 0];
            showNumbers = false;
            masterCanvas = generatePuzzleImage();
            shufflePuzzle();
        }

        function shufflePuzzle() {
            do {
                for (let i = puzzlePieces.length - 1; i > 0; i--) {
                    const j = Math.floor(Math.random() * (i + 1));
                    [puzzlePieces[i], puzzlePieces[j]] = [puzzlePieces[j], puzzlePieces[i]];
                }
            } while (!isSolvable() || isSolved());
            
            puzzleSolved = false;
            document.getElementById('puzzleResult').innerHTML = '';
            renderPuzzle();
        }

        function isSolvable() {
            let inversions = 0;
            for (let i = 0; i < puzzlePieces.length - 1; i++) {
                for (let j = i + 1; j < puzzlePieces.length; j++) {
                    if (puzzlePieces[i] && puzzlePieces[j] && puzzlePieces[i] > puzzlePieces[j]) {
                        inversions++;
                    }
                }
            }
            return inversions % 2 === 0;
        }

        function isSolved() {
            for (let i = 0; i < puzzlePieces.length - 1; i++) {
                if (puzzlePieces[i] !== i + 1) return false;
            }
            return puzzlePieces[puzzlePieces.length - 1] === 0;
        }

        function renderPuzzle() {
    const container = document.getElementById('puzzleContainer');
    container.innerHTML = '';
    
    const pieceSize = 300; // 900 / 3 (haute r√©solution)
    
    puzzlePieces.forEach((piece, index) => {
        const div = document.createElement('div');
        div.className = 'puzzle-piece';
        
        if (piece === 0) {
            div.classList.add('empty');
        } else {
            const canvas = document.createElement('canvas');
            canvas.width = pieceSize;
            canvas.height = pieceSize;
            const ctx = canvas.getContext('2d');
            
            const correctRow = Math.floor((piece - 1) / 3);
            const correctCol = (piece - 1) % 3;
            
            const sx = correctCol * pieceSize;
            const sy = correctRow * pieceSize;
            
            ctx.drawImage(
                masterCanvas,
                sx, sy, pieceSize, pieceSize,
                0, 0, pieceSize, pieceSize
            );
            
            div.appendChild(canvas);
            
            const numberSpan = document.createElement('span');
            numberSpan.className = 'puzzle-piece-number';
            numberSpan.textContent = piece;
            div.appendChild(numberSpan);
        }
        
        div.onclick = () => movePuzzlePiece(index);
        container.appendChild(div);
    });
}

        function movePuzzlePiece(index) {
    const emptyIndex = puzzlePieces.indexOf(0);
    
    const validMoves = [
        emptyIndex - 1,
        emptyIndex + 1,
        emptyIndex - 3,
        emptyIndex + 3
    ].filter(i => {
        if (i < 0 || i > 8) return false;
        if (emptyIndex % 3 === 0 && i === emptyIndex - 1) return false;
        if (emptyIndex % 3 === 2 && i === emptyIndex + 1) return false;
        return true;
    });
    
    if (validMoves.includes(index)) {
        [puzzlePieces[index], puzzlePieces[emptyIndex]] = 
        [puzzlePieces[emptyIndex], puzzlePieces[index]];
        
        renderPuzzle();
        checkPuzzle();
    } else {
        const piece = document.querySelectorAll('.puzzle-piece')[index];
        if (!piece.classList.contains('empty')) {
            piece.style.animation = 'shake 0.3s';
            setTimeout(() => piece.style.animation = '', 300);
        }
    }
}

        function checkPuzzle() {
    if (isSolved() && !puzzleSolved) {
        puzzleSolved = true;
        
        document.getElementById('puzzleResult').innerHTML = 
            '<p style="color: #0f0; font-weight: bold; font-size: 18px;">‚úì PUZZLE R√âSOLU !</p>';
        
        document.getElementById('puzzleModule').style.borderColor = '#0f0';
        document.getElementById('mazeModule').classList.remove('locked');
        
        showNotification('‚úì Puzzle compl√©t√© - Labyrinthe d√©bloqu√© !', '#0f0');
        
        const pieces = document.querySelectorAll('.puzzle-piece');
        pieces.forEach((piece, i) => {
            setTimeout(() => {
                piece.style.borderColor = '#0f0';
                piece.style.boxShadow = '0 0 20px rgba(0, 255, 0, 0.8)';
                piece.style.animation = 'successPulse 0.5s';
            }, i * 50);
        });
        
        setTimeout(() => {
            initMaze();
        }, 500);
    }
}

        function togglePuzzleNumbers() {
    showNumbers = !showNumbers;
    const container = document.getElementById('puzzleContainer');
    
    if (showNumbers) {
        container.classList.add('show-numbers');
    } else {
        container.classList.remove('show-numbers');
    }
}
		let mazeCompleted = false;
		let touchStartX = 0;
		let touchStartY = 0;
				
		let mazePlayer = {x: 0, y: 0};
		const mazeSize = 10;
		const cellSize = 30;
		let maze = [];
				
		function initMaze() {
			mazeCompleted = false;
			maze = [];
			for (let y = 0; y < mazeSize; y++) {
				maze[y] = [];
				for (let x = 0; x < mazeSize; x++) {
					maze[y][x] = Math.random() > 0.3 ? 0 : 1;
				}
			}
			maze[0][0] = 0;
			maze[mazeSize-1][mazeSize-1] = 2;
			mazePlayer = {x: 0, y: 0};
			drawMaze();
			
			// Activer les boutons
			document.querySelectorAll('.maze-btn').forEach(btn => btn.disabled = false);
			
			document.addEventListener('keydown', handleMazeMove);
		}

		// Fonction pour d√©placer le joueur avec les boutons
		function moveMazePlayer(direction) {
			if (mazeCompleted) return;
			
			let newX = mazePlayer.x;
			let newY = mazePlayer.y;
			
			switch(direction) {
				case 'up':
					newY--;
					break;
				case 'down':
					newY++;
					break;
				case 'left':
					newX--;
					break;
				case 'right':
					newX++;
					break;
			}
			
			// V√©rifier si le mouvement est valide
			if (newX >= 0 && newX < mazeSize && newY >= 0 && newY < mazeSize && maze[newY][newX] !== 1) {
				mazePlayer.x = newX;
				mazePlayer.y = newY;
				drawMaze();
				
				// Animation du bouton
				const buttonDirections = {
					'up': 0,
					'left': 1,
					'right': 2,
					'down': 3
				};
				const buttons = document.querySelectorAll('.maze-btn');
				const btn = buttons[buttonDirections[direction]];
				if (btn) {
					btn.classList.add('pressed');
					setTimeout(() => btn.classList.remove('pressed'), 300);
				}
				
				// V√©rifier si on a atteint la sortie
				if (maze[newY][newX] === 2) {
					mazeCompleted = true;
					document.getElementById('mazeResult').innerHTML = '<p style="color: #0f0; font-weight: bold;">‚úì SORTIE TROUV√âE !</p>';
					document.getElementById('mazeModule').style.borderColor = '#0f0';
					document.getElementById('memoryModule').classList.remove('locked');
					showNotification('‚úì Labyrinthe termin√© - Message crypt√© d√©bloqu√© !', '#0f0');
					
					// D√©sactiver les boutons
					document.querySelectorAll('.maze-btn').forEach(btn => btn.disabled = true);
					
					// Retirer l'event listener du clavier
					document.removeEventListener('keydown', handleMazeMove);
				}
			} else {
				// Feedback visuel quand on tape un mur
				const canvas = document.getElementById('mazeCanvas');
				canvas.style.animation = 'shake 0.3s';
				setTimeout(() => canvas.style.animation = '', 300);
			}
		}

		// Fonction pour recommencer le labyrinthe
		function resetMaze() {
			mazeCompleted = false;
			
			// R√©g√©n√©rer le labyrinthe
			maze = [];
			for (let y = 0; y < mazeSize; y++) {
				maze[y] = [];
				for (let x = 0; x < mazeSize; x++) {
					maze[y][x] = Math.random() > 0.3 ? 0 : 1;
				}
			}
			maze[0][0] = 0;
			maze[mazeSize-1][mazeSize-1] = 2;
			mazePlayer = {x: 0, y: 0};
			
			// R√©activer les boutons
			document.querySelectorAll('.maze-btn').forEach(btn => btn.disabled = false);
			
			// Effacer le r√©sultat
			document.getElementById('mazeResult').innerHTML = '';
			
			// Redessiner
			drawMaze();
			
			showNotification('üîÑ Labyrinthe r√©g√©n√©r√© !', '#ff6600');
		}

        
        function drawMaze() {
            const canvas = document.getElementById('mazeCanvas');
            const ctx = canvas.getContext('2d');
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            
            for (let y = 0; y < mazeSize; y++) {
                for (let x = 0; x < mazeSize; x++) {
                    if (maze[y][x] === 1) {
                        ctx.fillStyle = '#333';
                        ctx.fillRect(x * cellSize, y * cellSize, cellSize, cellSize);
                    } else if (maze[y][x] === 2) {
                        ctx.fillStyle = '#0f0';
                        ctx.fillRect(x * cellSize, y * cellSize, cellSize, cellSize);
                    }
                    ctx.strokeStyle = '#0f0';
                    ctx.strokeRect(x * cellSize, y * cellSize, cellSize, cellSize);
                }
            }
            
            ctx.fillStyle = '#ff6600';
            ctx.beginPath();
            ctx.arc(mazePlayer.x * cellSize + cellSize/2, mazePlayer.y * cellSize + cellSize/2, cellSize/3, 0, Math.PI * 2);
            ctx.fill();
            
            document.getElementById('mazePos').textContent = `(${mazePlayer.x}, ${mazePlayer.y})`;
        }

		function handleMazeMove(e) {
			if (mazeCompleted) return;
			
			const keyMap = {
				'ArrowUp': 'up',
				'ArrowDown': 'down',
				'ArrowLeft': 'left',
				'ArrowRight': 'right'
			};
			
			if (keyMap[e.key]) {
				e.preventDefault();
				moveMazePlayer(keyMap[e.key]);
			}
		}
    

		function closeFinalScreen() {
			document.getElementById('finalScreen').classList.remove('active');
			// Scroll vers les dossiers
			document.getElementById('filesModule').scrollIntoView({ behavior: 'smooth', block: 'center' });
		}
        
        function checkCode() {
            const input = document.getElementById('codeInput').value;
            const result = document.getElementById('codeResult');
            
            if (input === '124') {
                result.innerHTML = '<p style="color: #0f0; margin-top: 10px;">‚úì CODE CORRECT !</p>';
                
                setTimeout(() => {
                    document.getElementById('codeModule').style.borderColor = '#0f0';
                    document.getElementById('simonModule').classList.remove('locked');
                    showNotification('‚úì Code valid√© - Simon Says d√©bloqu√© !', '#0f0');
                }, 1000);
            } else {
                result.innerHTML = '<p style="color: #f00; margin-top: 10px;">‚úó INCORRECT</p>';
                triggerJumpscare();
                setTimeout(() => result.innerHTML = '', 2000);
            }
        }
        
        document.addEventListener('DOMContentLoaded', () => {
            const codeInput = document.getElementById('codeInput');
            if (codeInput) {
                codeInput.addEventListener('keypress', (e) => {
                    if (e.key === 'Enter') checkCode();
                });
            }
        });
        
        function showNotification(message, color) {
            const notif = document.createElement('div');
            notif.style.cssText = 'position: fixed; top: 20px; right: 20px; background: rgba(0,0,0,0.9); border: 2px solid ' + color + '; color: ' + color + '; padding: 20px; border-radius: 5px; z-index: 10000; font-family: Courier New, monospace; box-shadow: 0 0 30px ' + color + '; animation: slideIn 0.5s;';
            notif.textContent = message;
            document.body.appendChild(notif);
            
            setTimeout(() => {
                notif.style.animation = 'slideOut 0.5s';
                setTimeout(() => notif.remove(), 500);
            }, 3000);
        }
        
        function openFile(type) {
            const modal = document.getElementById('imageModal');
            const title = document.getElementById('modalTitle');
            const content = document.getElementById('modalContent');
            
            const files = {
                specimen: {
                    title: 'üß™ DOSSIER SPECIMEN 001',
                    content: '<p style="color: #0f0;">Classification: TOP SECRET</p><img src="SPECIMEN001.png" alt="Specimen"><p style="color: #ff6600; margin-top: 15px;">Sujet: Citrouille g√©n√©tiquement modifi√©e</p><p style="color: #f00;">Statut: CONFINEMENT ROMPU</p>'
                },
                lab: {
                    title: 'üîê COFFRE D\' ACCES AU PROJET CITROUILLE - DERNI√àRES PHOTOS',
                    content: '<p style="color: #0f0;">Horodatage: 31/10/2025 23:42</p><img src="BOITECLEF.png" alt="Lab"><p style="color: #f00; margin-top: 15px;">‚ö†Ô∏è Aucun personnel d√©tect√© aux environs.</p>'
                },
                warning: {
                    title: '‚ö†Ô∏è AVERTISSEMENT FINAL ‚ö†Ô∏èüî¶',
                    content: '<div style="background: rgba(255,0,0,0.2); padding: 20px; border: 2px solid #f00;"><p style="color: #f00; font-size: 20px; font-weight: bold;">√âQUIPEZ-VOUS IMM√âDIATEMENT</p><img src="UVLight.png" alt="Warning"><p style="color: #ff6600; margin-top: 15px;">Les citrouilles ont pris le contr√¥le.</p><p style="color: #f00;">NE VOUS DEPLACEZ PAS SANS LUMIERE POUR VOUS DEFENDRE ! </p></div>'
                },
                secret: {
                    title: 'üéÉ PROJET CITROUILLE - PLANS',
                    content: '<p style="color: #0f0;">Document confidentiel - Dr. Halloween</p><img src="PROJETCITROUILLE.png" alt="Plans"><p style="color: #ff6600; margin-top: 15px;">Phase 1: Cr√©ation ‚úì</p><p style="color: #ff6600;">Phase 2: √âvolution ‚úì</p><p style="color: #f00;">Phase 3: LIB√âRATION ‚úì</p><p style="color: #0f0; margin-top: 15px;">Code d\'arr√™t: <span style="color: #ff6600;">HALLOWEEN-666</span></p>'
                }
            };
            
            title.textContent = files[type].title;
            content.innerHTML = files[type].content;
            modal.style.display = 'flex';
            
            window.filesOpened.add(type);
            
            if (window.filesOpened.size === 4) {
                setTimeout(() => {
                    document.getElementById('step4').classList.remove('active');
                    document.getElementById('step4').classList.add('completed');
                    showNotification('üéâ MISSION COMPL√âT√âE !', '#ff6600');
                    triggerJumpscare();
                }, 1000);
            }
        }
        
        function closeModal() {
            document.getElementById('imageModal').style.display = 'none';
        }
        
        document.getElementById('imageModal').addEventListener('click', (e) => {
            if (e.target.id === 'imageModal') closeModal();
        });
		// ============================================
		// SYST√àME D'ADMINISTRATION
		// ============================================

		const ADMIN_PASSWORD = "MECANICIEN"; // Changez ce mot de passe !
		let isAdminAuthenticated = false;

		// Toggle panneau admin
		function toggleAdminPanel() {
			const panel = document.getElementById('adminPanel');
			if (panel.style.display === 'none' || panel.style.display === '') {
				// R√©initialiser l'authentification √† chaque ouverture
				isAdminAuthenticated = false;
				document.getElementById('adminAuth').style.display = 'block';
				document.getElementById('adminControls').style.display = 'none';
				document.getElementById('adminPassword').value = '';
				document.getElementById('adminAuthError').textContent = '';
				
				panel.style.display = 'block';
			} else {
				panel.style.display = 'none';
			}
		}

		function closeAdminPanel() {
			document.getElementById('adminPanel').style.display = 'none';
		}

		// V√©rification mot de passe admin
		function checkAdminPassword() {
			const input = document.getElementById('adminPassword').value;
			const error = document.getElementById('adminAuthError');
			
			if (input === ADMIN_PASSWORD) {
				isAdminAuthenticated = true;
				document.getElementById('adminAuth').style.display = 'none';
				document.getElementById('adminControls').style.display = 'block';
				updateGameStatus();
			} else {
				error.textContent = '‚ùå Code incorrect';
				document.getElementById('adminPassword').value = '';
				setTimeout(() => error.textContent = '', 2000);
			}
		}

		// Mise √† jour de l'√©tat du jeu
		function updateGameStatus() {
			const status = document.getElementById('gameStatus');
			if (!status) return;
			
			const steps = [
				{ id: 'step1', name: 'Cadenas Audio' },
				{ id: 'step2', name: 'Quiz Citrouilles' },
				{ id: 'step3', name: 'Mini-jeux' },
				{ id: 'step4', name: 'Dossiers Finaux' }
			];
			
			let html = '';
			steps.forEach(step => {
				const elem = document.getElementById(step.id);
				let state = '‚ö™ Verrouill√©';
				let color = '#666';
				
				if (elem.classList.contains('completed')) {
					state = '‚úÖ Compl√©t√©';
					color = '#0f0';
				} else if (elem.classList.contains('active')) {
					state = 'üîµ En cours';
					color = '#667eea';
				}
				
				html += `<div style="color: ${color};">${state} - ${step.name}</div>`;
			});
			
			status.innerHTML = html;
		}

		// R√©initialiser tout le jeu
		function adminResetGame() {
			if (!confirm('‚ö†Ô∏è ATTENTION : R√©initialiser compl√®tement le jeu ?')) return;
			
			// Reset des √©tapes
			['step1', 'step2', 'step3', 'step4'].forEach(id => {
				const elem = document.getElementById(id);
				elem.classList.remove('active', 'completed');
				elem.classList.add('locked');
			});
			
			// R√©activer √©tape 1
			document.getElementById('step1').classList.remove('locked');
			document.getElementById('step1').classList.add('active');
			
			// Verrouiller tous les modules
			['enigmaModule', 'codeModule', 'simonModule', 'puzzleModule', 'mazeModule', 'memoryModule', 'filesModule'].forEach(id => {
				const elem = document.getElementById(id);
				if (elem) elem.classList.add('locked');
			});
			
			// Reset des variables
			wheelValues = [0, 0, 0, 0];
			quizAnswered = false;
			window.filesOpened = new Set();
			window.errorCount = 0;
			simonSequence = [];
			simonRound = 0;
			puzzleSolved = false;
			memorySolved = false;
			
			// Reset des affichages
			document.querySelectorAll('.wheel-numbers').forEach((wheel, index) => {
				updateWheelDisplay(index);
			});
			
			document.getElementById('lockResult').innerHTML = '';
			document.getElementById('codeInput').value = '';
			
			// Fermer l'√©cran final si ouvert
			document.getElementById('finalScreen').classList.remove('active');
			
			alert('‚úÖ Jeu r√©initialis√© !');
			updateGameStatus();
		}

		// D√©bloquer toutes les √©tapes
		function adminUnlockAll() {
			if (!confirm('D√©bloquer TOUTES les √©tapes ?')) return;
			
			['step1', 'step2', 'step3', 'step4'].forEach(id => {
				const elem = document.getElementById(id);
				elem.classList.remove('locked', 'active');
				elem.classList.add('completed');
			});
			
			['enigmaModule', 'codeModule', 'simonModule', 'puzzleModule', 'mazeModule', 'memoryModule', 'filesModule'].forEach(id => {
				const elem = document.getElementById(id);
				if (elem) {
					elem.classList.remove('locked');
					elem.style.borderColor = '#0f0';
				}
			});
			
			alert('‚úÖ Toutes les √©tapes sont d√©bloqu√©es !');
			updateGameStatus();
		}

		// Aller directement aux dossiers finaux
		function adminSkipToFiles() {
			adminUnlockAll();
			document.getElementById('finalScreen').classList.add('active');
			
			setTimeout(() => {
				document.getElementById('filesModule').scrollIntoView({ 
					behavior: 'smooth', 
					block: 'center' 
				});
			}, 500);
		}

		// D√©bloquer une √©tape sp√©cifique
		function adminUnlockStep(stepName) {
			const modules = {
				'enigma': { module: 'enigmaModule', step: 'step2', prev: 'step1' },
				'code': { module: 'codeModule', step: 'step3', prev: 'step2' },
				'simon': { module: 'simonModule', step: 'step3', prev: 'step2' },
				'puzzle': { module: 'puzzleModule', step: 'step3', prev: 'step2' },
				'maze': { module: 'mazeModule', step: 'step3', prev: 'step2' },
				'memory': { module: 'memoryModule', step: 'step3', prev: 'step2' },
				'files': { module: 'filesModule', step: 'step4', prev: 'step3' }
			};
			
			const config = modules[stepName];
			if (!config) return;
			
			// D√©bloquer le module
			const moduleElem = document.getElementById(config.module);
			if (moduleElem) {
				moduleElem.classList.remove('locked');
				moduleElem.style.borderColor = '#ff6600';
				
				// Scroller vers le module
				moduleElem.scrollIntoView({ behavior: 'smooth', block: 'center' });
			}
			
			// Mettre √† jour les √©tapes de progression
			const stepElem = document.getElementById(config.step);
			if (stepElem) {
				stepElem.classList.remove('locked');
				stepElem.classList.add('active');
			}
			
			// Compl√©ter l'√©tape pr√©c√©dente
			const prevElem = document.getElementById(config.prev);
			if (prevElem && !prevElem.classList.contains('completed')) {
				prevElem.classList.remove('active');
				prevElem.classList.add('completed');
			}
			
			// Initialiser les jeux si n√©cessaire
			if (stepName === 'puzzle' && !puzzleSolved) {
				initPuzzle();
			}
			if (stepName === 'maze') {
				initMaze();
			}
			
			alert(`‚úÖ ${config.module.replace('Module', '')} d√©bloqu√© !`);
			updateGameStatus();
			closeAdminPanel();
		}

		// Raccourci clavier admin (Ctrl + Shift + A)
		document.addEventListener('keydown', (e) => {
			if (e.ctrlKey && e.shiftKey && e.key === 'A') {
				toggleAdminPanel();
			}
		});

		// Clic sur le fond pour fermer
		document.getElementById('adminPanel').addEventListener('click', (e) => {
			if (e.target.id === 'adminPanel') {
				closeAdminPanel();
			}
		});

    </script>
<div class="final-screen" id="finalScreen">
    <div class="final-box">
        <h1>‚úì TESTS COMPL√âT√âS AVEC SUCC√àS ‚úì</h1>
        
        <div class="intro-message">
            <p style="margin-bottom: 20px;">
                "Impressionnant. Vous auriez fait un excellent assistant. 
                Vos comp√©tences sont... remarquables.
            </p>
            
            <p style="margin-bottom: 20px; color: #ff6600;">
                Malheureusement, il est trop tard maintenant. 
                Mes autres assistants n'ont pas eu votre chance...
            </p>
            
            <p style="margin-bottom: 20px;">
                Les documents sont d√©verrouill√©s. 
                Vous y trouverez ce que vous cherchez.
            </p>
            
            <p style="margin-bottom: 20px; color: #ff6600; font-weight: bold;">
                D√©couvrez la <span class="glitch">V√âRIT√â</span>.
                D√©couvrez ma <span class="glitch">CR√âATION</span>.
            </p>
        </div>
        
        <div class="warning-box" style="border-color: #0f0; color: #0f0; background: rgba(0, 255, 0, 0.2);">
            ‚úì ACC√àS DOSSIER ACCORD√â ‚úì
        </div>
        
        <button onclick="closeFinalScreen()" style="background: #0f0; font-size: 18px; padding: 15px;">
            ACC√âDER AUX DOCUMENTS FINAUX
        </button>
    </div>
</div>
</body>
</html>